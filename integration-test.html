<!DOCTYPE html>
<html>
<head>
    <title>Integration Test</title>
    <script src="config.js"></script>
</head>
<body>
    <h1>Cloudflare Pages + Workers Integration Test</h1>
    <button onclick="testWorkerConnection()">Test Worker Connection</button>
    <button onclick="testHealthEndpoint()">Test Health Endpoint</button>
    <div id="result" style="margin-top: 20px; padding: 10px; background: #f0f0f0;"></div>

    <script>
        async function testWorkerConnection() {
            try {
                const workerUrl = window.CONFIG.WORKER_URL;
                document.getElementById('result').innerHTML = `<p>Testing connection to: ${workerUrl}</p>`;
                
                // Simple fetch to see if we can reach the worker
                const response = await fetch(workerUrl);
                document.getElementById('result').innerHTML += `<p>Connection successful! Status: ${response.status}</p>`;
            } catch (error) {
                document.getElementById('result').innerHTML = `<p style="color: red;">Connection failed: ${error.message}</p>`;
            }
        }

        async function testHealthEndpoint() {
            try {
                const workerUrl = window.CONFIG.WORKER_URL;
                const response = await fetch(`${workerUrl}/api/health`);
                const data = await response.json();
                document.getElementById('result').innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('result').innerHTML = `<p style="color: red;">Health check failed: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>